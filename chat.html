<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css" />
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.min.js"></script>

    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet" />
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.2/css/all.min.css" rel="stylesheet" />

    <link href="styles/auth.css" rel="stylesheet" />
    <link href="styles/home.css" rel="stylesheet" />
    <link href="styles/avatar.css" rel="stylesheet" />
    <link href="styles/call_modal.css" rel="stylesheet" />
    <link href="styles/comments.css" rel="stylesheet" />
    <link href="styles/global.css" rel="stylesheet" />
    <link href="styles/header.css" rel="stylesheet" />
    <link href="styles/icons.css" rel="stylesheet" />
    <link href="styles/loading.css" rel="stylesheet" />
    <link href="styles/message.css" rel="stylesheet" />
    <link href="styles/post_thumb.css" rel="stylesheet" />
    <link href="styles/profile.css" rel="stylesheet" />
    <link href="styles/status_modal.css" rel="stylesheet" />
</head>

<body>
    <div class="App">
        <div class="main">
            <div class="header bg-light">
                <nav class="
                      navbar navbar-expand-lg navbar-light
                      bg-light
                      justify-content-between
                      align-middle
                    ">
                    <div class="logo">
                        <h1 class="navbar-brand text-uppercase p-0 m-0">Instagram</h1>
                    </div>

                    <form class="search_form">
                        <input type="text" name="search" value="" id="search" title="Enter to Search" />
                        <div class="search_icon" style="opacity: 0.3">
                            <span class="material-icons">search</span>
                            <span>Enter to Search</span>
                        </div>
                        <div class="close_search" style="opacity: 1">Ã—</div>
                        <button type="submit" style="display: none">Search</button>
                    </form>

                    <div class="menu">
                        <ul class="navbar-nav flex-row">
                            <li class="nav-item px-2">
                                <div class="nav-link">
                                    <span class="material-icons">home</span>
                                </div>
                            </li>
                            <li class="nav-item px-2">
                                <div class="nav-link">
                                    <span class="material-icons">near_me</span>
                                </div>
                            </li>
                            <li class="nav-item px-2">
                                <div class="nav-link">
                                    <span class="material-icons">explore</span>
                                </div>
                            </li>
                            <li class="nav-item dropdown" style="opacity: 1">
                                <span class="nav-link position-relative" id="navbarDropdown" role="button"
                                    data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                    <span class="material-icons" style="color: crimson">
                                        favorite
                                    </span>
                                    <span class="notify_length">3</span>
                                </span>
                                <div class="dropdown-menu" aria-labelledby="navbarDropdown"
                                    style="transform: translateX(75px)"></div>
                            </li>
                            <li class="nav-item dropdown" style="opacity: 1">
                                <span class="nav-link dropdown-toggle" id="navbarDropdown" role="button"
                                    data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                    <img src="https://res.cloudinary.com/devat-channel/image/upload/v1631811242/v-network/vj9pee0vwrifc1bugijz.jpg"
                                        class="medium-avatar" />
                                </span>
                                <div class="dropdown-menu" aria-labelledby="navbarDropdown">
                                    <div class="dropdown-item">Profile</div>
                                    <label for="theme" class="dropdown-item"></label>
                                    <div class="dropdown-divider"></div>
                                    <div class="dropdown-item">Logout</div>
                                </div>
                            </li>
                        </ul>
                    </div>
                </nav>
            </div>

            <div class="message d-flex">
                <div class="col-md-4 border-right px-0 left_mess">
                    <form class="message_header" onSubmit={handleSearch}>
                        <input type="text" value="" placeholder="Enter to Search..." />

                        <button type="submit" style="display: none">Search</button>
                    </form>

                    <div class="message_chat_list">


                        <div key={user._id} class="message_user">
                            <div class="d-flex p-2 align-items-center justify-content-between w-100">
                                <div>
                                    <div onClick={handleCloseAll} class="d-flex align-items-center">

                                        <img src="https://images.fpt.shop/unsafe/fit-in/960x640/filters:quality(90):fill(white):upscale()/fptshop.com.vn/Uploads/Originals/2020/6/11/637274688345972278_iPhone_11_Green_2-up_US-EN_SCREEN.jpg"
                                            class="big-avatar" />

                                        <div class="ml-1" style="transform: 'translateY(-2px)'">
                                            <span class="d-block">sang</span>

                                            <small style="opacity: 0.7">
                                                name
                                            </small>
                                        </div>
                                    </div>
                                </div>
                            </div>




                            <!-- : <>
                                {
                                    message.users.map(user => (
                                        <div key={user._id} class={`message_user ${isActive(user)}`}
                                        onClick={() => handleAddUser(user)}>
                                            <UserCard user={user} msg={true}>
                                                {
                                                    user.online
                                                    ? <i class="fas fa-circle text-success" />
                                                    : auth.user.following.find(item => 
                                                        item._id === user._id
                                                    ) && <i class="fas fa-circle" />
                                                        
                                                }
                                                
                                            </UserCard>
                                        </div>
                                    ))
                                }
                            </> -->


                            <button ref={pageEnd} style="opacity: 0">Load More</button>
                        </div>
                    </div>
                </div>
                    <div class="col-md-8 px-0">
                        <!-- <RightSide /> -->
                        <div class="message_header" style="cursor: pointer">
                            <div class="d-flex p-2 align-items-center justify-content-between w-100">
                                <div>
                                    <div onClick={handleCloseAll} class="d-flex align-items-center">

                                        <img src="https://images.fpt.shop/unsafe/fit-in/960x640/filters:quality(90):fill(white):upscale()/fptshop.com.vn/Uploads/Originals/2020/6/11/637274688345972278_iPhone_11_Green_2-up_US-EN_SCREEN.jpg"
                                            class="big-avatar" />

                                        <div class="ml-1" style="transform: 'translateY(-2px)'">
                                            <span class="d-block">sang</span>

                                            <small style="opacity: 0.7">
                                                name
                                            </small>
                                        </div>
                                    </div>
                                </div>

                                <div>
                                    <i class="fas fa-phone-alt" onClick={handleAudioCall}></i>

                                    <i class="fas fa-video mx-3" onClick={handleVideoCall}></i>

                                    <i class="fas fa-trash text-danger" onClick={handleDeleteConversation}></i>
                                </div>
                            </div>
                        </div>

                        <div class="chat_container" style="height: calc(100% - 180px)">
                            <div class="chat_display" ref={refDisplay}>
                                <button style="marginTop: -25px; opacity: 0" ref={pageEnd}>
                                    Load more
                                </button>



                                <div key={index}>
                                    <!-- msg.sender !== auth.user._id && -->
                                    <div class="chat_row other_message">
                                        <div class="chat_title">
                                            <img
                                                src="https://res.cloudinary.com/devat-channel/image/upload/v1631811242/v-network/vj9pee0vwrifc1bugijz.jpg"
                                                class="small-avatar" />
                                            <span>sang</span>
                                        </div>

                                        <div class="you_content">

                                            <!-- user._id === auth.user._id &&  -->
                                            <i class="fas fa-trash text-danger" onClick={handleDeleteMessages}></i>


                                            <div>

                                                <!-- msg.text &&  -->
                                                <div class="chat_text" style="filter: invert(0)">
                                                    hello
                                                </div>

                                                <!-- {
                                                                msg.media.map((item, index) => (
                                                                    <div key={index}>
                                                                        {
                                                                            item.url.match(/video/i)
                                                                            ? videoShow(item.url, theme)
                                                                            : imageShow(item.url, theme)
                                                                        }
                                                                    </div>
                                                                ))
                                                            } -->
                                            </div>
                                            <!--                                                     
                                                        {
                                                            msg.call &&
                                                            <button class="btn d-flex align-items-center py-3"
                                                            style={{background: '#eee', borderRadius: '10px'}}>
                                        
                                                                <span class="material-icons font-weight-bold mr-1"
                                                                style={{ 
                                                                    fontSize: '2.5rem', color: msg.call.times === 0 ? 'crimson' : 'green',
                                                                    filter: theme ? 'invert(1)' : 'invert(0)'
                                                                }}>
                                                                    {
                                                                        msg.call.times === 0
                                                                        ? msg.call.video ? 'videocam_off' : 'phone_disabled'
                                                                        : msg.call.video ? 'video_camera_front' : 'call'
                                                                    }
                                                                </span>
                                        
                                                                <div class="text-left">
                                                                    <h6>{msg.call.video ? 'Video Call' : 'Audio Call'}</h6>
                                                                    <small>
                                                                        {
                                                                            msg.call.times > 0 
                                                                            ? <Times total={msg.call.times} />
                                                                            : new Date(msg.createdAt).toLocaleTimeString()
                                                                        }
                                                                    </small>
                                                                </div>
                                        
                                                            </button>
                                                        } -->

                                        </div>

                                        <div class="chat_time">
                                            12/12/2020
                                        </div>
                                    </div>

                                    <!-- msg.sender === auth.user._id && -->
                                    <div class="chat_row you_message">
                                        <!-- <MsgDisplay user={auth.user} msg={msg} theme={theme} data={data} /> -->
                                        <div class="chat_row other_message">
                                            <div class="chat_title">
                                                <img
                                                    src="https://res.cloudinary.com/devat-channel/image/upload/v1631811242/v-network/vj9pee0vwrifc1bugijz.jpg"
                                                    class="small-avatar" />
                                                <span>sang</span>
                                            </div>
    
                                            <div class="you_content">
    
                                                <!-- user._id === auth.user._id &&  -->
                                                <i class="fas fa-trash text-danger" onClick={handleDeleteMessages}></i>
    
    
                                                <div>
    
                                                    <!-- msg.text &&  -->
                                                    <div class="chat_text" style="filter: invert(0)">
                                                        hello
                                                    </div>
    
                                                    <!-- {
                                                                    msg.media.map((item, index) => (
                                                                        <div key={index}>
                                                                            {
                                                                                item.url.match(/video/i)
                                                                                ? videoShow(item.url, theme)
                                                                                : imageShow(item.url, theme)
                                                                            }
                                                                        </div>
                                                                    ))
                                                                } -->
                                                </div>
                                                <!--                                                     
                                                            {
                                                                msg.call &&
                                                                <button class="btn d-flex align-items-center py-3"
                                                                style={{background: '#eee', borderRadius: '10px'}}>
                                            
                                                                    <span class="material-icons font-weight-bold mr-1"
                                                                    style={{ 
                                                                        fontSize: '2.5rem', color: msg.call.times === 0 ? 'crimson' : 'green',
                                                                        filter: theme ? 'invert(1)' : 'invert(0)'
                                                                    }}>
                                                                        {
                                                                            msg.call.times === 0
                                                                            ? msg.call.video ? 'videocam_off' : 'phone_disabled'
                                                                            : msg.call.video ? 'video_camera_front' : 'call'
                                                                        }
                                                                    </span>
                                            
                                                                    <div class="text-left">
                                                                        <h6>{msg.call.video ? 'Video Call' : 'Audio Call'}</h6>
                                                                        <small>
                                                                            {
                                                                                msg.call.times > 0 
                                                                                ? <Times total={msg.call.times} />
                                                                                : new Date(msg.createdAt).toLocaleTimeString()
                                                                            }
                                                                        </small>
                                                                    </div>
                                            
                                                                </button>
                                                            } -->
    
                                            </div>
    
                                            <div class="chat_time">
                                                12/12/2020
                                            </div>
                                        </div>
                                    </div>

                                </div>



                                <!-- {
                               loadMedia && 
                               <div class="chat_row you_message">
                                   <img src={LoadIcon} alt="loading"/>
                               </div>
                           } -->

                            </div>
                        </div>

                        <!-- <div class="show_media" style="display: media.length > 0 ? 'grid' : 'none'}} >
                        {
                            media.map((item, index) => (
                                <div key={index} id="file_media">
                                    {
                                        item.type.match(/video/i)
                                        ? videoShow(URL.createObjectURL(item), theme)
                                        : imageShow(URL.createObjectURL(item), theme)
                                    }
                                    <span onClick={() => handleDeleteMedia(index)} >&times;</span>
                                </div>
                            ))
                        }
                    </div> -->

                        <form class="chat_input" onSubmit={handleSubmit}>
                            <input type="text" placeholder="Enter you message..." value="" style="
                            filter: invert(0);
                          
                            
                        " />

                            <!-- <Icons setContent={setText} content={text} theme={theme} /> -->

                            <div class="file_upload">
                                <i class="fas fa-image text-danger"></i>
                                <input type="file" name="file" id="file" multiple accept="image/*,video/*"
                                    onChange={handleChangeMedia} />
                            </div>

                            <button type="submit" class="material-icons" >
                                near_me
                            </button>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
</body>

</html>